{{- $values := include "replicated.values" . | fromYaml -}}
apiVersion: v1
kind: Service
metadata:
  labels:
    {{- include "replicated.labels" . | nindent 4 }}
  {{- if $values.commonAnnotations }}
  annotations:
    {{- toYaml $values.commonAnnotations | nindent 4 }}
  {{- end }}
  name: {{ include "replicated.serviceName" . }}
  namespace: {{ include "replicated.namespace" . | quote }}
spec:
  ports:
  - name: http
    port: {{ $values.service.port }}
    targetPort: 3000
  selector:
    {{- include "replicated.selectorLabels" . | nindent 4 }}
  type: {{ $values.service.type }}
