apiVersion: v1
kind: Secret
metadata:
  labels:
    {{- include "replicated.labels" . | nindent 4 }}
  name: replicated
type: Opaque
stringData:
  {{- if .Values.license }}
  REPLICATED_LICENSE_BASE64: {{ .Values.license | b64enc }}
  {{- end }}
  REPLICATED_LICENSE_FIELDS_BASE64: {{ include "replicated.licenseFields" . | b64enc }}
  REPLICATED_APP_NAME: "{{ .Values.appName }}"
  REPLICATED_CHANNEL_ID: "{{ .Values.channelID }}"
  REPLICATED_CHANNEL_NAME: "{{ .Values.channelName }}"
  REPLICATED_CHANNEL_SEQUENCE: "{{ .Values.channelSequence }}"
  REPLICATED_RELEASE_SEQUENCE: "{{ .Values.releaseSequence }}"
  REPLICATED_RELEASE_CREATED_AT: "{{ .Values.releaseCreatedAt }}"
  REPLICATED_RELEASE_NOTES: |-
    {{ .Values.releaseNotes }}
  REPLICATED_VERSION_LABEL: "{{ .Values.versionLabel }}"
  REPLICATED_REPLICATED_APP_ENDPOINT: "{{ .Values.replicatedAppEndpoint }}"
  REPLICATED_INFORMERS_LABEL_SELECTOR: 'app.kubernetes.io/managed-by={{ .Release.Service }},app.kubernetes.io/name!={{ include "replicated.name" . }},app.kubernetes.io/instance={{ .Release.Name }}'
  {{- if .Values.integration }}
  {{- if .Values.integration.licenseID }}
  REPLICATED_LICENSE_ID: {{ .Values.integration.licenseID }}
  {{- end }}
  {{- if .Values.integration.mockData }}
  REPLICATED_MOCK_DATA: {{- .Values.integration.mockData | toYaml | indent 1 }}
  {{- end }}
  {{- end }}
