apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "replicated.labels" . | nindent 4 }}
  name: {{ include "replicated.configMapName" . }}
data:
{{- $data := (lookup "v1" "ConfigMap" .Release.Namespace (include "replicated.configMapName" .)).data }}
{{- if $data }}
  replicated-id: {{ index $data "replicated-id" }}
  app-id: {{ index $data "app-id" }}
{{- else }}
  replicated-id: {{ uuidv4 }}
  app-id: {{ uuidv4 }}
{{- end }}
